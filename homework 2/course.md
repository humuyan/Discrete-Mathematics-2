# Report

由于 $n$ 较小，考虑状态压缩。

首先对任意一种课程的组合方式，预处理其是否可以在一个学期内上完，即判断是否有时间冲突。这部分的时间复杂度为 $O(2^n\sum k_i)$，空间复杂度为 $O(2^n)$。

然后进行状态压缩动态规划，$dp[i][S]=0/1$ 表示用 $i$ 个学期修完集合 $S$ 内所有课程是否可行。转移只需枚举 $S^c$ 的一个子集，利用预处理的信息就判断出这个子集内课程是否可以一学期上完。枚举子集可以用如下的trick：

```c++
for (int s = S; s; s = (s-1)&S) {
    // s是S的一个子集
}
```

即可做到 $O(3^nn)$ 的时间复杂度。空间上利用滚动数组可以做到 $O(2^n)$ 的复杂度。

总时间复杂度为 $O(2^n\sum k_i+3^nn)$，空间复杂度为 $O(2^n)$。

